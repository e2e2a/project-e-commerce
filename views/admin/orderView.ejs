<!-- views/orders.ejs -->
<%- include('./partials/header/header.ejs'); %>

<body class="animsition">
    <div class="page-wrapper">
        <%- include('./partials/navigation/mobile-nav.ejs'); %>

        <!-- PAGE CONTAINER-->
        <div class="page-container2">
            <%- include('./partials/navigation/nav.ejs'); %>
            <%- include('./partials/sidebar/sidebar.ejs'); %>
            <!-- MAIN CONTENT-->
            <div class="main-content">
                <div class="section__content section__content--p30">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-lg-12">
                                <h3 class="title-5 m-b-35">Orders</h3>
                                <div class="table-responsive table--no-card m-b-30">
                                    <table class="table table-borderless table-striped table-earning">
                                        <thead>
                                            <tr>
                                                <th class="text-center">Order ID</th>
                                                <th>Customer Name</th>
                                                <th>Items</th>
                                                <th>Total</th>
                                                <!-- Add other order fields as needed -->
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% orders.forEach(order => { %>
                                            <tr>
                                                <td><%= order._id %></td>
                                                <% console.log(order.userId) %>
                                                <td><%= order.userId?.fullname %></td> <!-- Accessing user name -->
                                                <td>
                                                    <ul>
                                                        <% order.items.forEach(item => { %>
                                                        <li><%= item.productId.name %> - <%= item.productId.price %></li> <!-- Accessing product name and price -->
                                                        <% }); %>
                                                    </ul>
                                                </td>
                                                <td><%= order.totalAmount %></td> <!-- Using totalAmount instead of total -->
                                                <!-- Display other order fields as needed -->
                                            </tr>
                                            <% }); %>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <%- include('./partials/footer/copyright.ejs'); %>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<%- include('./partials/footer/footer_js.ejs') %>
